<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>273文档系统: 怎样调用273的AppServ接口？</title>
<!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="app_new_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="app_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="doc_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">273文档系统
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="navrow1" class="tabs">
    <ul class="tablist">
        <li><a href="index.html"><span>273文档系统</span></a></li>
        <li><a href="classes.html"><span>App接口索引</span></a></li>
        <li><a href="annotated.html"><span>App接口列表</span></a></li>
        <li><a href="http://doc.273.cn/classSaleServiceApp__4.html"><span>注释样例</span></a></li>
        <li><a href="http://192.168.5.34/log.php" target="_blank"><span>注释错误日志</span></a></li>
    </ul>
</div>
<!-- 制作者 Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_app_serv_use.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>结构体</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>命名空间</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>页</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">怎样调用273的AppServ接口？ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h4>接口调用域名说明：</h4>
<pre class="fragment">https://appserv.273.cn       (appServ 线上接口域名）

https://appservtest.273.cn (appServ sim环境接口域名）

http://192.168.5.31            (appServ 测试环境接口域名)
</pre><h4>系统参数说明：</h4>
<blockquote class="doxtable">
<p>注意：_api_passport 和 _api_app(目前值只有 bc ) 使用POST方式上发，其他的系统参数均使用GET方式上发。 </p>
</blockquote>
<table class="doxtable">
<tr>
<th>系统参数名称 </th><th>上发方式 </th><th>系统参数说明  </th></tr>
<tr>
<td>_api_version </td><td>GET </td><td>调用接口的版本，例如：1.0、2.0.... </td></tr>
<tr>
<td>_api_method </td><td>GET </td><td>接口的方法，例如：sale.newSale </td></tr>
<tr>
<td>_api_time </td><td>GET </td><td>调用接口时的时间戳 </td></tr>
<tr>
<td>_api_token </td><td>GET </td><td>调用接口时的口令 </td></tr>
<tr>
<td>_api_key </td><td>GET </td><td>接口证书：由273提供 </td></tr>
<tr>
<td>_api_secret </td><td>GET </td><td>接口证书：由273提供 </td></tr>
<tr>
<td>_api_passport </td><td>POST </td><td>由user.login方法返回结果提供，客户端登陆后可将次_api_passport保留下来,不必每次都获取 </td></tr>
<tr>
<td>_api_app </td><td>POST </td><td>需要用户登录才能调用的接口必须，例如_api_app = bc 表明调用的是业管的接口 </td></tr>
<tr>
<td>_api_debug </td><td>GET </td><td>调试参数，可选，客户端发版时请将此参数去掉,为1的时候会在bc后台记录请求参数和返回结果的日志 </td></tr>
</table>
<h4>接口调用步骤解说：</h4>
<ol type="1">
<li>获取_api_token <a href="https://appserv.273.cn/1.0/auth.getAccessToken?_api_time=">https://appserv.273.cn/1.0/auth.getAccessToken?_api_time=</a>{发起请求时间戳}&amp;_api_key={提供给的公钥}&amp;_api_secret={md5(_api_secret{提供的私钥} + _api_time)}</li>
<li>返回:_api_token,之后的请求请使用此_api_token,客户端可将此_api_token保留下来，_api_token有效期是30天</li>
</ol>
<h4>接口url示例:</h4>
<pre class="fragment">https://appserv.273.cn/1.0/search.getSaleList?_api_time={发起请求时间戳}&amp;_api_key={提供给的公钥}&amp;_api_token={通过auth.getAccessToken得到的令牌}&amp;{method_params方法需要的参数} 

在此_api_version=1.0，_api_method=search.getSaleList
</pre><h4>统一返回:</h4>
<pre class="fragment">返回正确结果的格式： 

    json_encode(array(‘errorCode’：0，’errorMessge’：’’,’data’：method返回的内容))； 

返回错误结果的格式： 

    errorCode为相应错误码，errorMessge为错误信息，data=’’;

    注:errorCode为9表示_api_token已过期，请重新调用auth.getAccessToken方式获取_api_token</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">生成于 2014年 十月 27日 星期一 20:10:33 , 为 273文档系统使用 
    <a href="http://www.doxygen.org/index.html">
    </li>
  </ul>
</div>
</body>
</html>
